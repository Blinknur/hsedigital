# ================================
# MULTI-REGION ENVIRONMENT
# ================================
# For multi-region deployment configuration

NODE_ENV=production
PORT=3001

# ================================
# CURRENT DEPLOYMENT REGION
# ================================
DEPLOYMENT_REGION=US_EAST

# ================================
# SECURITY (REQUIRED)
# ================================
JWT_SECRET=CHANGE_ME_STRONG_SECRET
REFRESH_SECRET=CHANGE_ME_STRONG_REFRESH_SECRET

# ================================
# US EAST REGION (Primary)
# ================================
DATABASE_URL_US_EAST_PRIMARY=postgresql://hse_admin:password@us-east-primary-db.internal:5432/hse_platform
DATABASE_URL_US_EAST_REPLICA=postgresql://hse_admin:password@us-east-replica-db.internal:5432/hse_platform
REDIS_CLUSTER_US_EAST=us-east-redis-1.internal:6379,us-east-redis-2.internal:6379,us-east-redis-3.internal:6379
REDIS_SENTINELS_US_EAST=us-east-sentinel-1.internal:26379,us-east-sentinel-2.internal:26379,us-east-sentinel-3.internal:26379
CDN_ENDPOINT_US_EAST=https://cdn-us-east.hse.digital
CDN_ORIGIN_US_EAST=us-east-origin.hse.digital
LB_ENDPOINT_US_EAST=https://us-east-lb.hse.digital

# ================================
# EU WEST REGION
# ================================
DATABASE_URL_EU_WEST_PRIMARY=postgresql://hse_admin:password@eu-west-primary-db.internal:5432/hse_platform
DATABASE_URL_EU_WEST_REPLICA=postgresql://hse_admin:password@eu-west-replica-db.internal:5432/hse_platform
REDIS_CLUSTER_EU_WEST=eu-west-redis-1.internal:6379,eu-west-redis-2.internal:6379,eu-west-redis-3.internal:6379
REDIS_SENTINELS_EU_WEST=eu-west-sentinel-1.internal:26379,eu-west-sentinel-2.internal:26379,eu-west-sentinel-3.internal:26379
CDN_ENDPOINT_EU_WEST=https://cdn-eu-west.hse.digital
CDN_ORIGIN_EU_WEST=eu-west-origin.hse.digital
LB_ENDPOINT_EU_WEST=https://eu-west-lb.hse.digital

# ================================
# AP SOUTHEAST REGION
# ================================
DATABASE_URL_AP_SOUTHEAST_PRIMARY=postgresql://hse_admin:password@ap-southeast-primary-db.internal:5432/hse_platform
DATABASE_URL_AP_SOUTHEAST_REPLICA=postgresql://hse_admin:password@ap-southeast-replica-db.internal:5432/hse_platform
REDIS_CLUSTER_AP_SOUTHEAST=ap-southeast-redis-1.internal:6379,ap-southeast-redis-2.internal:6379,ap-southeast-redis-3.internal:6379
REDIS_SENTINELS_AP_SOUTHEAST=ap-southeast-sentinel-1.internal:26379,ap-southeast-sentinel-2.internal:26379,ap-southeast-sentinel-3.internal:26379
CDN_ENDPOINT_AP_SOUTHEAST=https://cdn-ap-southeast.hse.digital
CDN_ORIGIN_AP_SOUTHEAST=ap-southeast-origin.hse.digital
LB_ENDPOINT_AP_SOUTHEAST=https://ap-southeast-lb.hse.digital

# ================================
# REDIS CONFIGURATION
# ================================
REDIS_MODE=cluster
REDIS_SENTINEL_MASTER_NAME=hse-master
REDIS_PASSWORD=CHANGE_ME
REDIS_SENTINEL_PASSWORD=CHANGE_ME
REDIS_HEALTH_CHECK_INTERVAL=30000

# ================================
# DATABASE CONFIGURATION
# ================================
DB_HEALTH_CHECK_INTERVAL=30000
DATABASE_CONNECTION_LIMIT=20
DATABASE_CONNECTION_TIMEOUT=5000

# ================================
# CDN CONFIGURATION
# ================================
CDN_ENABLED=true
CDN_PROVIDER=cloudflare
CDN_PURGE_ON_DEPLOY=true

# ================================
# FAILOVER CONFIGURATION
# ================================
AUTO_FAILOVER_ENABLED=true
MANUAL_FAILOVER_REQUIRED=false
FAILBACK_ENABLED=true
FAILBACK_DELAY=300000
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000
MAX_CONSECUTIVE_FAILURES=3

# ================================
# GEO-ROUTING
# ================================
ENABLE_CROSS_REGION_PROXY=true

# ================================
# MONITORING
# ================================
LOG_LEVEL=info
SLOW_QUERY_THRESHOLD_MS=1000
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.05
OTEL_ENABLED=true
OTEL_SERVICE_NAME=hse-digital-backend-multiregion
OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4318/v1/traces

# ================================
# INTEGRATIONS
# ================================
API_KEY=your-google-ai-key
STRIPE_SECRET_KEY=sk_live_production_key
STRIPE_WEBHOOK_SECRET=whsec_production_secret
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASS=CHANGE_ME

# ================================
# APPLICATION
# ================================
CLIENT_URL=https://app.hse.digital
CORS_ORIGIN=https://app.hse.digital

# ================================
# AWS S3
# ================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=CHANGE_ME
AWS_SECRET_ACCESS_KEY=CHANGE_ME
S3_BUCKET_NAME=hse-digital-multiregion-reports

# ================================
# REPORTS
# ================================
REPORTS_STORAGE_TYPE=s3
REPORT_RETENTION_DAYS=365

# ================================
# AUDIT
# ================================
AUDIT_LOG_RETENTION_DAYS=730
